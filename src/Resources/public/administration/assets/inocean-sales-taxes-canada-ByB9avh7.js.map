{"version":3,"file":"inocean-sales-taxes-canada-ByB9avh7.js","sources":["../../../app/administration/src/module/sw-order/component/sw-order-line-items-grid/sw-order-line-items-grid.html.twig","../../../app/administration/src/module/sw-order/component/sw-order-line-items-grid/index.js","../../../app/administration/src/module/sw-order/view/sw-order-detail-general/sw-order-detail-general.html.twig","../../../app/administration/src/module/sw-order/view/sw-order-detail-general/index.js"],"sourcesContent":["{% block sw_order_line_items_grid_grid_columns_tax_inline_edit %}{% endblock %}\n\n{% block sw_order_line_items_grid_grid_columns_tax_content_tooltip %}{% endblock %}\n\n{% block sw_order_line_items_grid_grid_columns_tax_content %}\n<span v-if=\"item.price && item.price.taxRules.length\">\n    <template\n        v-for=\"(calculatedTax, index) in sortedCalculatedTaxes\"\n        :key=\"index\"\n    >\n        <span class=\"sw-order-line-items-grid__item_taxes\">\n            {{ $tc('salseTaxCanada.order.summary.tax' + calculatedTax.taxDetails.name, { taxRate: calculatedTax.taxDetails.rate }, 1) }} {{ currencyFilter(calculatedTax.taxDetails.tax, calculatedTax.taxDetails.currencyIsoCode, order.totalRounding.decimals) }}\n        </span>\n    </template>\n</span>\n{% endblock %}","import template from './sw-order-line-items-grid.html.twig';\nimport './sw-order-line-items-grid.scss';\n\nconst { Component } = Shopware;\n\nComponent.override('sw-order-line-items-grid', {\n    template,\n\n    computed: {\n\n        getLineItemColumns() {\n            const columnDefinitions = [\n                {\n                    property: 'quantity',\n                    dataIndex: 'quantity',\n                    label: 'sw-order.detailBase.columnQuantity',\n                    allowResize: false,\n                    align: 'right',\n                    inlineEdit: true,\n                    width: '90px',\n                },\n                {\n                    property: 'label',\n                    dataIndex: 'label',\n                    label: 'sw-order.detailBase.columnProductName',\n                    allowResize: false,\n                    primary: true,\n                    inlineEdit: true,\n                    multiLine: true,\n                },\n                {\n                    property: 'payload.productNumber',\n                    dataIndex: 'payload.productNumber',\n                    label: 'sw-order.detailBase.columnProductNumber',\n                    allowResize: false,\n                    align: 'left',\n                    visible: false,\n                },\n                {\n                    property: 'unitPrice',\n                    dataIndex: 'unitPrice',\n                    label: this.unitPriceLabel,\n                    allowResize: false,\n                    align: 'right',\n                    inlineEdit: true,\n                    width: '120px',\n                },\n            ];\n\n            if (this.taxStatus !== 'tax-free') {\n                columnDefinitions.push({\n                    property: 'price.taxRules[0]',\n                    label: 'salseTaxCanada.order.lineItem.tax',\n                    allowResize: false,\n                    align: 'right',\n                    inlineEdit: false,\n                    width: '110px',\n                });\n            }\n\n            return [\n                ...columnDefinitions,\n                {\n                    property: 'totalPrice',\n                    dataIndex: 'totalPrice',\n                    label:\n                        this.taxStatus === 'gross'\n                            ? 'sw-order.detailBase.columnTotalPriceGross'\n                            : 'sw-order.detailBase.columnTotalPriceNet',\n                    allowResize: false,\n                    align: 'right',\n                    width: '120px',\n                },\n            ];\n        },\n\n        sortedCalculatedTaxes() {\n\n            if (!this.order || !this.order.lineItems) {\n                return [];\n            }\n\n            const taxAggregation = {};\n\n            this.order.lineItems.forEach(lineItem => {\n                if (lineItem.payload && Array.isArray(lineItem.payload.inoceanCanadaTaxInfo)) {\n                    lineItem.payload.inoceanCanadaTaxInfo.forEach(taxInfo => {\n                        const rateKey = taxInfo.rate;\n\n                        if (!taxAggregation[rateKey]) {\n                            taxAggregation[rateKey] = {\n                                taxRate: taxInfo.rate,\n                                taxName: taxInfo.name,\n                                taxPriceTotal: 0,\n                            };\n                        }\n\n                        taxAggregation[rateKey].taxPriceTotal += Number(taxInfo.tax) || 0;\n                    });\n                }\n            });\n\n            const aggregatedTaxes = Object.values(taxAggregation);\n\n            aggregatedTaxes.sort((a, b) => a.taxRate - b.taxRate);\n            return aggregatedTaxes.map(tax => ({\n                taxDetails: {\n                    rate: tax.taxRate,\n                    tax: tax.taxPriceTotal,\n                    name: tax.taxName,\n                    currencyIsoCode: this.order.currency.isoCode,\n                },\n            }));\n        },\n\n    }\n});","{% block sw_order_detail_general_line_items_summary_amount_without_tax %}\n<template v-if=\"taxStatus !== 'tax-free'\">\n    <dt><strong>{{ $tc('salseTaxCanada.order.summary.subtotal') }}</strong></dt>\n    <dd><strong>{{ currencyFilter(order.amountNet, currency.isoCode, order.totalRounding.decimals) }}</strong></dd>\n</template>\n{% endblock %}\n\n{% block sw_order_detail_general_line_items_summary_taxes %}\n    <template v-if=\"taxStatus !== 'tax-free'\">\n        <template\n            v-for=\"(calculatedTax, index) in sortedCalculatedTaxes\"\n            :key=\"index\"\n        >\n            <dt>\n                {{ $tc('salseTaxCanada.order.summary.tax' + calculatedTax.taxDetails.name, { taxRate: calculatedTax.taxDetails.rate }, 1) }}\n            </dt>\n            <dd>\n                {{ currencyFilter(calculatedTax.taxDetails.tax, currency.isoCode, order.totalRounding.decimals) }}\n            </dd>\n        </template>\n        <template\n            v-for=\"(shippingTax, index) in sortedShippingTaxes\"\n            :key=\"index\"\n        >\n            <dt>\n                {{ $tc('salseTaxCanada.order.summary.shippingTax' + shippingTax.taxDetails.name, { taxRate: shippingTax.taxDetails.rate }, 1) }}\n            </dt>\n            <dd>\n                {{ currencyFilter(shippingTax.taxDetails.tax, currency.isoCode, order.totalRounding.decimals) }}\n            </dd>\n        </template>\n    </template>\n{% endblock %}\n\n{% block sw_order_detail_general_line_items_summary_amount_total %}\n<template v-if=\"taxStatus !== 'tax-free'\">\n    <dt><strong>{{ $tc('salseTaxCanada.order.summary.groundTotal') }}</strong></dt>\n    <dd><strong>{{ currencyFilter(orderTotal, currency.isoCode, order.totalRounding.decimals) }}</strong></dd>\n    <template v-if=\"displayRounded\">\n        <dt><strong>{{ $tc('salseTaxCanada.order.summary.totalRounded') }}</strong></dt>\n        <dd><strong>{{ currencyFilter(order.price.totalPrice, currency.isoCode, order.totalRounding.decimals) }}</strong></dd>\n    </template>\n</template>\n{% endblock %}\n","import template from './sw-order-detail-general.html.twig';\n\nconst { Component } = Shopware;\n\nComponent.override('sw-order-detail-general', {\n    template,\n\n    computed: {\n        taxStatus() {\n            return this.order.price.taxStatus;\n        },\n        sortedCalculatedTaxes() {\n\n            if (!this.order || !this.order.lineItems) {\n                return [];\n            }\n\n            const taxAggregation = {};\n\n            this.order.lineItems.forEach(lineItem => {\n                if (lineItem.payload && Array.isArray(lineItem.payload.inoceanCanadaTaxInfo)) {\n                    lineItem.payload.inoceanCanadaTaxInfo.forEach(taxInfo => {\n                        const rateKey = taxInfo.rate;\n\n                        if (!taxAggregation[rateKey]) {\n                            taxAggregation[rateKey] = {\n                                taxRate: taxInfo.rate,\n                                taxName: taxInfo.name,\n                                taxPriceTotal: 0,\n                            };\n                        }\n\n                        taxAggregation[rateKey].taxPriceTotal += Number(taxInfo.tax) || 0;\n                    });\n                }\n            });\n\n            const aggregatedTaxes = Object.values(taxAggregation);\n\n            aggregatedTaxes.sort((a, b) => a.taxRate - b.taxRate);\n            return aggregatedTaxes.map(tax => ({\n                taxDetails: {\n                    rate: tax.taxRate,\n                    tax: tax.taxPriceTotal,\n                    name: tax.taxName,\n                },\n            }));\n        },\n        sortedShippingTaxes() {\n\n            if (!this.order || !this.order.lineItems) {\n                return [];\n            }\n\n            const shippingTaxAggregation = {};\n\n            this.order.lineItems.forEach(lineItem => {\n                if (lineItem.payload && Array.isArray(lineItem.payload.inoceanShippingTaxInfo)) {\n                    lineItem.payload.inoceanShippingTaxInfo.forEach(taxInfo => {\n                        const rateKey = taxInfo.rate;\n\n                        if (!shippingTaxAggregation[rateKey]) {\n                            shippingTaxAggregation[rateKey] = {\n                                taxRate: taxInfo.rate,\n                                taxName: taxInfo.name,\n                                taxPriceTotal: 0,\n                            };\n                        }\n\n                        shippingTaxAggregation[rateKey].taxPriceTotal += Number(taxInfo.tax) || 0;\n                    });\n                }\n            });\n\n            const aggregatedShippingTaxes = Object.values(shippingTaxAggregation);\n\n            aggregatedShippingTaxes.sort((a, b) => a.taxRate - b.taxRate);\n            return aggregatedShippingTaxes.map(tax => ({\n                taxDetails: {\n                    rate: tax.taxRate,\n                    tax: tax.taxPriceTotal,\n                    name: tax.taxName,\n                },\n            }));\n        },\n    }\n});"],"names":["template$1","Component","template","columnDefinitions","taxAggregation","lineItem","taxInfo","rateKey","aggregatedTaxes","b","tax","shippingTaxAggregation","aggregatedShippingTaxes"],"mappings":"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"}